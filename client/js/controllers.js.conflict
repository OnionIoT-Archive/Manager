'use strict';

var controllers = angular.module('manager.controllers', []);

controllers.controller('NavCtrl', ['$state', 'tabItems', 'userProfile',
function($state, tabItems, userProfile) {
	this.tabItems = angular.copy(tabItems);

	this.userProfile = angular.copy(userProfile);

	// Determin whether the current tab is active or not
	this.isActive = function(sref) {
		return ($state.current.name.search(sref) !== -1) ? true : false;
	};
}]);

//the controller for the socket
controllers.controller('LoginCtrl', ['$scope', 'socket', 'sha3', 'localStorageService',
function($scope, socket, sha3, localStorage) {
	var self = this;
	console.log($scope.user);
	socket.on('test', function(data) {
		self.test = data.data;
	});
	socket.on('LOGIN_SUCCESS', function (data) {

	});
	socket.on('LOGIN_FAIL', function () {
		self.loginFailed = true;
	});
<<<<<<< HEAD
	this.authen = function() {
		socket.emit('login', {
			email : $scope.user.email,
			password : $scope.user.password
=======
	this.authen = function (email, password) {
		var pwHash = sha3(password);
		socket.emit('LOGIN', {
			email: email,
			hash: pwHash
>>>>>>> 9a0187599a191e135a75d7d813910007a34b9189
		});
	}
}]);
